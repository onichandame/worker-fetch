(function(){new class{handlerMap=new Map;constructor(e){e.onconnect=e=>{let t=e.ports[0];t.onmessage=e=>{switch(e.type){case`message`:let n=e.data;this.handlerMap.get(n.resource)?.(n.data).then(e=>{console.log(n),t.postMessage({data:e,requestId:n.requestId,resource:n.resource,state:`completed`})});break;default:console.error(`event type ${e.type} unknown`)}}}}on(e,t){this.handlerMap.set(e,t)}}(self).on(`add`,async e=>e.reduce((e,t)=>e+t))})();